# MetaBase
Next Generation Backend Server.

Goals: kill 90% boring backend works, focus on 10% important features.
ä¸ºä¸€äººå…¬å¸ï¼Œå°æœåŠ¡å™¨è®¾è®¡ï¼Œé«˜æ€§èƒ½ï¼Œå¹¶ä¸”æ»¡è¶³åæœŸæˆé•¿éœ€æ±‚ï¼Œæ²¡æœ‰å¤æ‚è¿ç»´ä»»åŠ¡ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…å¼€å‘å·¥å…·
```bash
make install
```

### å¼€å‘æ¨¡å¼
```bash
make dev
```

### æ„å»º
```bash
make build
```

## ğŸ“– ä½¿ç”¨

### é»˜è®¤å¯åŠ¨
```bash
# å¯åŠ¨å®Œæ•´åŠŸèƒ½æœåŠ¡å™¨ (ç«¯å£ 7609)
./bin/metabase server --enable-all
```

### åˆ†æ¨¡å—å¯åŠ¨
```bash
# å¯åŠ¨æ ¸å¿ƒæœåŠ¡å™¨
./bin/metabase server

# å¯åŠ¨é™æ€ç½‘ç«™æœåŠ¡ (ç«¯å£ 8080)
./bin/metabase www serve

# æ„å»ºé™æ€ç½‘ç«™
./bin/metabase www build
```

## ğŸŒ è®¿é—®åœ°å€

- **ä¸»æœåŠ¡**: http://localhost:7609
- **ç®¡ç†æ§åˆ¶å°**: http://localhost:7609/admin
- **API å¥åº·æ£€æŸ¥**: http://localhost:7609/api/health
- **é™æ€ç½‘ç«™**: http://localhost:8080
- **å®Œæ•´æ–‡æ¡£**: http://localhost:8080/docs/overview

## ğŸ“š åŠŸèƒ½ç‰¹æ€§

### âœ… å·²å®ç°åŠŸèƒ½
- ğŸ—ï¸ **ä¸€ä½“åŒ–æ¶æ„**: åµŒå…¥å¼ NATS + SQLite + Pebble
- ğŸ”„ **æ¶ˆæ¯é˜Ÿåˆ—**: åŸºäº NATS çš„ RPC ä¸ä»»åŠ¡è°ƒåº¦
- ğŸ’¾ **æ··åˆå­˜å‚¨**: SQLite + Pebble é«˜æ€§èƒ½å­˜å‚¨å¼•æ“
- ğŸ“ **æ–‡ä»¶ç³»ç»Ÿ**: ä¼ä¸šçº§æ–‡ä»¶å­˜å‚¨ï¼Œæ”¯æŒæœ¬åœ°ã€S3ã€MinIO
- ğŸ“Š **å®æ—¶åˆ†æ**: è®¿é—®æ—¥å¿—ã€æœç´¢ã€ä»ªè¡¨ç›˜ã€æŠ¥è¡¨ç”Ÿæˆ
- ğŸ” **å®‰å…¨è®¤è¯**: JWT + RBAC + è¡Œçº§å®‰å…¨ç­–ç•¥ (RLS)
- ğŸ¢ **å¤šç§Ÿæˆ·**: å®Œæ•´çš„å¤šç§Ÿæˆ·éš”ç¦»ä¸æƒé™ç®¡ç†
- ğŸ›ï¸ **ç®¡ç†æ§åˆ¶å°**: ç°ä»£åŒ– Svelte ç®¡ç†ç•Œé¢
- ğŸ“± **å®¢æˆ·ç«¯ SDK**: Go å®¢æˆ·ç«¯åº“ï¼ŒTypeScript/Python å¼€å‘ä¸­

### ğŸ”§ æŠ€æœ¯æ ˆ
- **åç«¯**: Go 1.25+, Embedded NATS, SQLite, Pebble
- **å‰ç«¯**: Svelte, Tailwind CSS, Vite
- **å­˜å‚¨**: æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ, AWS S3, MinIO
- **æ¶ˆæ¯é˜Ÿåˆ—**: åµŒå…¥å¼ NATS (é›¶é…ç½®)
- **è®¤è¯**: JWT, API Key, RBAC
- **ç›‘æ§**: å®æ—¶ç»Ÿè®¡, æ€§èƒ½æŒ‡æ ‡, é”™è¯¯è¿½è¸ª

## ğŸ—ï¸ æ¶æ„è®¾è®¡

MetaBase é‡‡ç”¨ä¸€ä½“åŒ–æ¶æ„ï¼Œæ ¸å¿ƒç»„ä»¶å…¨éƒ¨å†…åµŒï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  MetaBase Server                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  HTTP API  â”‚  Embedded NATS  â”‚  Analytics  â”‚  Admin  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Storage   â”‚   Files   â”‚   Auth   â”‚  Tenant  â”‚ RLS  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   SQLite    â”‚  Pebble  â”‚  File System              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒä¼˜åŠ¿
- **é›¶é…ç½®**: åµŒå…¥å¼ NATSï¼Œæ— éœ€å¤–éƒ¨ä¾èµ–
- **é«˜æ€§èƒ½**: æ··åˆå­˜å‚¨ï¼Œå¾®ç§’çº§å“åº”
- **å¯æ‰©å±•**: æ°´å¹³æ‰©å±•ï¼Œæ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²
- **æ˜“è¿ç»´**: å•äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå†…ç½®ç›‘æ§å’Œåˆ†æ

## ğŸ“– æ–‡æ¡£

- [æ¶æ„è®¾è®¡](docs/architecture.md) - æ ¸å¿ƒæ¶æ„ä¸è®¾è®¡ç†å¿µ
- [API å‚è€ƒ](docs/api.md) - å®Œæ•´çš„ REST API æ–‡æ¡£
- [å¿«é€Ÿå¼€å§‹](docs/start.md) - è¯¦ç»†çš„å®‰è£…å’Œé…ç½®æŒ‡å—
- [å¤šç§Ÿæˆ·](docs/multitenancy.md) - å¤šç§Ÿæˆ·åŠŸèƒ½ä½¿ç”¨æŒ‡å—
- [è¡Œçº§å®‰å…¨](docs/rls.md) - è¡Œçº§å®‰å…¨ç­–ç•¥é…ç½®
- [éƒ¨ç½²æŒ‡å—](docs/deploy.md) - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æŒ‡å—
- [é…ç½®è¯´æ˜](docs/config.md) - è¯¦ç»†é…ç½®é€‰é¡¹

## ğŸš€ å¼€å‘

### ç¯å¢ƒè¦æ±‚
- Go 1.25+
- Node.js 18+ (ç”¨äºç®¡ç†ç•Œé¢å¼€å‘)

### å¼€å‘å‘½ä»¤
```bash
# å®‰è£…ä¾èµ–
make install

# å¯åŠ¨å¼€å‘æ¨¡å¼ (åŒ…å«å®Œæ•´åŠŸèƒ½å’Œçƒ­é‡è½½)
make dev

# å¯åŠ¨ç®¡ç†ç•Œé¢å¼€å‘
make admin-dev

# å¯åŠ¨å®¢æˆ·ç«¯åº“å¼€å‘
make client-dev

# è¿è¡Œæµ‹è¯•
make test

# ä»£ç æ£€æŸ¥
make lint

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
make build-prod
```

### é¡¹ç›®ç»“æ„
```
metabase/
â”œâ”€â”€ cmd/metabase/          # åº”ç”¨å…¥å£
â”œâ”€â”€ internal/              # å†…éƒ¨å®ç°
â”‚   â”œâ”€â”€ core/             # æ ¸å¿ƒæœåŠ¡å™¨
â”‚   â”œâ”€â”€ storage/          # å­˜å‚¨å¼•æ“
â”‚   â”œâ”€â”€ nrpc/             # æ¶ˆæ¯é˜Ÿåˆ—
â”‚   â”œâ”€â”€ analytics/        # åˆ†æå¼•æ“
â”‚   â”œâ”€â”€ files/            # æ–‡ä»¶å­˜å‚¨
â”‚   â”œâ”€â”€ auth/             # è®¤è¯æœåŠ¡
â”‚   â””â”€â”€ ...
â”œâ”€â”€ pkg/client/            # Go å®¢æˆ·ç«¯ SDK
â”œâ”€â”€ clients/               # å¤šè¯­è¨€å®¢æˆ·ç«¯
â”œâ”€â”€ admin-svelte/          # ç®¡ç†ç•Œé¢
â”œâ”€â”€ web/                   # é™æ€èµ„æº
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â”œâ”€â”€ test/                  # æµ‹è¯•
â””â”€â”€ Makefile              # æ„å»ºè„šæœ¬
```

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæ‰€æœ‰æµ‹è¯•
```bash
make test
```

### è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```bash
make test-coverage
```

### è¿è¡Œé›†æˆæµ‹è¯•
```bash
make test-integration
```

### æ€§èƒ½æµ‹è¯•
```bash
make benchmark
```

## ğŸ“¦ å®¢æˆ·ç«¯ SDK

### Go
```go
import "github.com/metabase/metabase/pkg/client"

client := client.New(&client.Config{
    URL:    "http://localhost:7609",
    APIKey: "your-api-key",
})

record, err := client.Create(ctx, "users", map[string]interface{}{
    "name": "John Doe",
    "email": "john@example.com",
})
```

### TypeScript (å¼€å‘ä¸­)
```bash
npm install @metabase/clients
```

### Python (å¼€å‘ä¸­)
```bash
pip install metabase-clients
```

## ğŸ³ Docker

### æ„å»ºé•œåƒ
```bash
make docker-build
```

### è¿è¡Œå®¹å™¨
```bash
make docker-run
```

### Docker Compose
```yaml
version: '3.8'
services:
  metabase:
    image: metabase:latest
    ports:
      - "7609:7609"
      - "7610:7610"
    volumes:
      - ./data:/app/data
    environment:
      - METABASE_ENV=production
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

- **å¯åŠ¨æ—¶é—´**: < 2 ç§’
- **å†…å­˜å ç”¨**: < 100MB (ç©ºé—²çŠ¶æ€)
- **å¹¶å‘å¤„ç†**: 10,000+ QPS
- **æ–‡ä»¶ä¸Šä¼ **: 100MB+ å•æ–‡ä»¶æ”¯æŒ
- **æ•°æ®å­˜å‚¨**: TB çº§åˆ«æ•°æ®æ”¯æŒ
- **å“åº”æ—¶é—´**: P95 < 50ms

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **å¤šç§Ÿæˆ·éš”ç¦»**: å®Œæ•´çš„ç§Ÿæˆ·çº§åˆ«æ•°æ®éš”ç¦»
- **æƒé™æ§åˆ¶**: RBAC + è¡Œçº§å®‰å…¨ç­–ç•¥ (RLS)
- **æ•°æ®åŠ å¯†**: ä¼ è¾“åŠ å¯† + å­˜å‚¨åŠ å¯†
- **API å®‰å…¨**: JWT è®¤è¯ + API Key æ”¯æŒ
- **å®¡è®¡æ—¥å¿—**: å®Œæ•´çš„æ“ä½œå®¡è®¡è®°å½•
- **è®¿é—®é™åˆ¶**: é¢‘ç‡é™åˆ¶ + IP ç™½åå•

## ğŸŒŸ å¯¹æ¯”ä¼ ç»Ÿæ–¹æ¡ˆ

| ç‰¹æ€§ | MetaBase | ä¼ ç»Ÿæ–¹æ¡ˆ (Firebase/Supabase) |
|------|----------|---------------------------|
| éƒ¨ç½²æ–¹å¼ | å•æœºéƒ¨ç½² | äº‘ç«¯æ‰˜ç®¡ |
| æ•°æ®æ§åˆ¶ | å®Œå…¨æŒæ§ | ç¬¬ä¸‰æ–¹æ‰˜ç®¡ |
| é…ç½®å¤æ‚åº¦ | é›¶é…ç½® | éœ€è¦é…ç½® |
| æ¶ˆæ¯é˜Ÿåˆ— | å†…åµŒ NATS | éœ€è¦é¢å¤–æœåŠ¡ |
| æ–‡ä»¶å­˜å‚¨ | å†…ç½®å¤šåç«¯ | æœ‰é™çš„å­˜å‚¨é€‰é¡¹ |
| åˆ†æç›‘æ§ | å†…ç½®å®Œæ•´åˆ†æ | åŸºç¡€ç›‘æ§ |
| æˆæœ¬æ§åˆ¶ | ä¸€æ¬¡æ€§æŠ•å…¥ | æŒç»­è®¢é˜…è´¹ç”¨ |
| æ•°æ®ä¸»æƒ | å®Œå…¨è‡ªä¸» | ä¾èµ–æœåŠ¡å•† |

## ğŸ›£ï¸ è·¯çº¿å›¾

### v1.1 (å¼€å‘ä¸­)
- [ ] TypeScript/Python å®¢æˆ·ç«¯ SDK
- [ ] åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ
- [ ] AIå¼‚å¸¸æ£€æµ‹å‘Šè­¦

### v1.2 (è§„åˆ’ä¸­)
- [ ] æ’ä»¶ç³»ç»Ÿ
- [ ] å·¥ä½œæµå¼•æ“
- [ ] å®æ—¶åä½œ
- [ ] ç§»åŠ¨ç«¯ SDK

### v2.0 (é•¿æœŸè§„åˆ’)
- [ ] å¾®æœåŠ¡æ¶æ„æ”¯æŒ
- [ ] è¾¹ç¼˜è®¡ç®—
- [ ] å¤šäº‘éƒ¨ç½²


## TODO
- [ ] Standalone server or embeded server.
- [ ] Setup admin and config center.
- [ ] Docker ENVORIMENT config support.
- [ ] å¤šç§Ÿæˆ·ã€å¤šé¡¹ç›®æ”¯æŒã€‚
- [ ] é™æ€ç½‘ç«™Serve, éƒ¨ç½²æ–¹ä¾¿ï¼ˆftpï¼Ÿï¼Ÿï¼‰
- [x] Markdownç½‘ç«™æ¨¡æ¿ï¼Œåšå®¢æ–°é—»æ–‡æ¡£æ˜“ç”¨ã€‚
- [ ] Supabase like client API.
- [x] Sqlit + NATS + Pebble + (Redis?) = é«˜å¯ç”¨çš„å­˜å‚¨å¼•æ“
- [ ] NRPC é«˜æ€§èƒ½é˜Ÿåˆ—base on
NATSï¼Œåˆ†å¸ƒå¼ä»»åŠ¡åŠRPCæ¡†æ¶ï¼Œä¸»åŠ›ï¼Œç¨³å®šæ€§ä¿è¯ï¼Œå‰Šå³°å¡«è°·ã€‚
- [ ] HTTP(NPRC) API Frameworkï¼ˆBase on NRPC, Request queue to NATS)
- [ ] å­˜ã€ç®—ã€ç®¡ã€æŸ¥ã€æœã€äº‹åŠ¡åœ¨ä¸šåŠ¡æ¨¡å‹ä¸Šå…¨éƒ¨è½»æ¾æ”¯æŒï¼Œä¿æŒä¸€è‡´ã€‚
- [ ] Supabase like è¡Œçº§å®‰å…¨ç­–ç•¥RLSï¼ŒBaaSï¼Œæ— åç«¯è®¾è®¡. anno_key.
- [ ] æµ‹è¯•ã€ç”Ÿäº§ã€å¼€å‘ å¤šç¯å¢ƒåŒæ­¥ã€éƒ¨ç½²é—®é¢˜ã€‚
- [ ] MQTT/MAIL/CMS/FILE/IM/AUTH/RAG/CRAWLER/RECOMMENDATION
- [-] ç®¡ç†åå°çš„ç•Œé¢
  - [ ] ç®¡ç†å‘˜
  - [ ] è¯·æ±‚æ—¥å¿—ï¼Œæœç´¢
  - [ ] è®¿é—®è¯·æ±‚åˆ†æ
  - [ ] æ€§èƒ½ç›‘æ§
  - [ ] é…ç½®ä¸­å¿ƒ
  - [ ] è¡¨ç®¡ç†

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·æŸ¥çœ‹ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md) äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚

### å¼€å‘æµç¨‹
1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

- [NATS](https://nats.io/) - é«˜æ€§èƒ½æ¶ˆæ¯é˜Ÿåˆ—
- [SQLite](https://sqlite.org/) - è½»é‡çº§æ•°æ®åº“
- [Pebble](https://github.com/cockroachdb/pebble) - é«˜æ€§èƒ½ KV å­˜å‚¨
- [Svelte](https://svelte.dev/) - ç°ä»£å‰ç«¯æ¡†æ¶

## ğŸ“ è”ç³»

- é¡¹ç›®ä¸»é¡µ: https://github.com/metabase/metabase
- é—®é¢˜åé¦ˆ: https://github.com/metabase/metabase/issues
- è®¨è®ºç¤¾åŒº: https://github.com/metabase/metabase/discussions

---

ğŸš€ **å‡è½»åç«¯çš„å†—æ‚äº‹åŠ¡ï¼Œä¸“æ³¨ 10% æ ¸å¿ƒä¸šåŠ¡ä»·å€¼ï¼**